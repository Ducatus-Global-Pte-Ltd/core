#!/usr/bin/env node
'use strict';

const { Storage } = require('../ts_build/storage');
const program = require('../ts_build/program');

program
  .version(require('../package.json').version)
  .option('--path [path]', 'optional - Where wallets are stored')
  .option('--storageType [storageType]', 'optional - default Level - choose the database from where to list wallets')
  .parse(process.argv);

const main = async () => {
  const { path, storageType } = program;
  const storage = new Storage({createIfMissing: false, errorIfExists: false, path, storageType});
  const keyStream = await storage.listKeys();
  keyStream.on('data', (key) => {
    console.log(JSON.parse(JSON.stringify(key)));
  });
};

main();
