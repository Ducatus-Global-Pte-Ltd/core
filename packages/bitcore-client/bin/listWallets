#!/usr/bin/env node
'use strict';

const Storage = require('../lib/storage');
const program = require('../lib/program');

program
  .version(require('../package.json').version)
  .option('--path [path]', 'optional - Where wallets are stored')
  .parse(process.argv);

const main = async () => {
  const { path } = program;
  let storage = new Storage({createIfMissing: false, errorIfExists: false, path});
  let itr = storage.listWallets();
  let value;
  let getNext = (err, keyBuffer) => {
    if(!err && keyBuffer) {
      const key = keyBuffer.toString();
      // key = 'wallet|walletName'
      console.log(key.slice(7));
      itr.next(getNext);
    }
  }
  itr.next(getNext);
}

main();
